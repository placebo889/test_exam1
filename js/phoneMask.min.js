function mask(e){e.keyCode&&(keyCode=e.keyCode);let t=this.selectionStart;t<3&&e.preventDefault();let n="+38(0__) ___-__-__",l=0,a=n.replace(/\D/g,""),u=this.value.replace(/\D/g,""),i=n.replace(/[_\d]/g,function(e){return l<u.length?u.charAt(l++)||a.charAt(l):e});l=i.indexOf("_"),-1!=l&&(l<6&&(l=18),i=i.slice(0,l));let s=n.substr(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");s=new RegExp("^"+s+"$"),(!s.test(this.value)||this.value.length<5||keyCode>47&&keyCode<58)&&(this.value=i),"blur"==e.type&&this.value.length<5&&(this.value="")}let keyCode;const input=document.querySelector("#phone");input.addEventListener("input",mask,!1),input.addEventListener("focus",mask,!1),input.addEventListener("blur",mask,!1),input.addEventListener("keydown",mask,!1);